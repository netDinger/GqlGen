targets:
  $default:
    builders:
      gql_gen|graphql_string_builder:
        generate_for:
          - lib/**.graphql
          - lib/**/*.graphql
      gql_gen|graphql_aggregate_builder: {}

builders:
  graphql_string_builder:
    import: "package:gql_gen/src/graphql_builder.dart"
    builder_factories: ["graphQLStringBuilder"]
    build_extensions: { ".graphql": [".graphql.dart"] }
    auto_apply: dependents
    build_to: source
    defaults:
      options:
        # Optional: one of 'embed' (default) or 'load'.
        mode: embed
        # Optional: include globs to limit processing
        include: ["lib/graphql/**/*.graphql"]
        # Optional: exclude globs
        exclude: []
        # Optional: When non-empty, per-file outputs are disabled (aggregate-only mode).
        output_subdir: ""

  graphql_aggregate_builder:
    import: "package:gql_gen/src/aggregate_builder.dart"
    builder_factories: ["graphQLAggregateBuilder"]
    build_extensions: { "$lib$": ["graphql/generatedOutputs/Queries.dart"] }
    auto_apply: dependents
    build_to: source
    defaults:
      options:
        # Optional: one of 'embed' (default) or 'load'.
        mode: embed
        include: ["lib/graphql/**/*.graphql"]
        exclude: []
        # Optional: When non-empty, only the aggregate file is generated.
        # NOTE: The aggregate output path is fixed to lib/graphql/generatedOutputs/Queries.dart by build.yaml.
        # To change the output folder, modify this mapping in build.yaml.
        output_subdir: ""
